
Generating documentation using `Sphinx <http://sphinx.pocoo.org>`_ on `GitHub <http://www.github.com>`_
*******************************************************************************************************

Using :

- a `GitHub <http://www.github.com>`_ account and repository
- activated `GitHub <http://www.github.com>`_ webpages
- installed versions of `Sphinx <http://sphinx.pocoo.org>`_ and `sphinx-to-github <https://github.com/michaeljones/sphinx-to-github>`_

This *Howto* looks a bit like this other one http://lucasbardella.com/report/hosting-your-sphinx-docs-in-github/.

Create a new root branch named ``gh-pages`` on your repository
==============================================================

See http://pages.github.com for details on this step. The code should look like this.

.. code-block:: console

   $ cd /path/to/fancypants
   $ git symbolic-ref HEAD refs/heads/gh-pages
   $ rm .git/index
   $ git clean -fdx

After running this you’ll have an empty working directory (don’t worry, your main repo is still on the master ``branch``). Now you can create some content in this branch and push it to GitHub. For example:

.. code-block:: console

   $ echo "My GitHub Page" > index.html
   $ git add .
   $ git commit -a -m "First pages commit"
   $ git push origin gh-pages

Create your documentation source using ``sphinx-quickstart``
============================================================

See http://packages.python.org/an_example_pypi_project/sphinx.html for details on this step.

The first step prepares the documentation file structure in a directory using ``sphinx-quickstart``.

To get started, ``cd`` into the documentation directory and type:

.. code-block:: console

   $ sphinx-quickstart

   Please enter values for the following settings
   (just press Enter to accept a default value, if
   one is given in brackets).

Then you should get:

.. code-block:: console

   Finished: An initial directory structure has been created.

   You should now populate your master file .\source\index.rst and create other documentation
   source files. Use the sphinx-build command to build the docs, like so:
   sphinx-build -b builder .\source .\build
   where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

Now get in the documentation path and write some doc in the master file ``index.rst`` following directions from http://matplotlib.sourceforge.net/sampledoc/cheatsheet.html or http://packages.python.org/an_example_pypi_project/sphinx.html.

Install `sphinx-to-github <https://github.com/michaeljones/sphinx-to-github>`_ extension and configure ``conf.py``
==================================================================================================================

Note that the directory contains two subdirs named ``_sources`` and ``_static``. The ``_`` prefix is known to get misinterpreted by GitHub. The `sphinx-to-github <https://github.com/michaeljones/sphinx-to-github>`_ script precisely aims at correcting this prefix effect. As written on its GitHub page, ``sphinxtogithub.py`` can be run on the command line or used as a Sphinx extension (e.g. in the ``site-packages`` directory). Remember that if used as an extension from the ``site-packages`` directory, then you should add ``sphinx.ext.sphinxtogithub`` to the list named ``extensions`` contained in the ``conf.py`` file in the documentation directory. For instance, it might look like::

   extensions = ['sphinx.ext.sphinxtogithub', 'sphinx.ext.autodoc', 'sphinx.ext.doctest', 'sphinx.ext.intersphinx', 'sphinx.ext.todo', 'sphinx.ext.coverage', 'sphinx.ext.pngmath']

Generate HTML (or pdf, or man, ...) pages using `sphinx-build <http://sphinx.pocoo.org/invocation.html>`_
=========================================================================================================

See http://sphinx.pocoo.org/invocation.html for details on this step.

From the documentation directory, the command could be as simple as :

.. code-block:: console

   $ sphinx-build -b html . ./build

This creates the HTML pages from the ``.rst`` pages and runs the `sphinx-to-github <https://github.com/michaeljones/sphinx-to-github>`_ extension to correct the ``_`` prefix effect before committing.

Populate your ``gh-pages`` branch with the ``build`` directory
==============================================================

At this step, I usually copy the files and subdirs contained in the ``build`` directory generated by ``sphinx-build`` to the empty ``gh-pages`` branch. There should be no directory starting with ``_`` or ``.rst`` files since this branch is made for HTML webpages. If you wish to get version control on your documentation source files, then you might store them in a specific subdir or possibly in a different branch. Some resources on the web explain how to avoid switching branches in order to write documentation but it is not explained here.

Add your files to the repository, commit and push to the ``gh-pages`` branch.

Visit the website http://you.github.com/your_repository/.




